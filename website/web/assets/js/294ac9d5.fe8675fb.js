"use strict";(globalThis.webpackChunkwebsite=globalThis.webpackChunkwebsite||[]).push([[8744],{6145(n,e,i){i.d(e,{R:()=>l,x:()=>r});var t=i(7140);const o={},s=t.createContext(o);function l(n){const e=t.useContext(s);return t.useMemo(function(){return"function"==typeof n?n(e):{...e,...n}},[e,n])}function r(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(o):n.components||o:l(n.components),t.createElement(s.Provider,{value:e},n.children)}},9049(n,e,i){i.r(e),i.d(e,{assets:()=>a,contentTitle:()=>r,default:()=>u,frontMatter:()=>l,metadata:()=>t,toc:()=>c});const t=JSON.parse('{"id":"plugins","title":"Plugins","description":"Extend Jen.js functionality with a powerful plugin system.","source":"@site/docs/plugins.md","sourceDirName":".","slug":"/plugins","permalink":"/docs/plugins","draft":false,"unlisted":false,"editUrl":"https://github.com/kessud2021/Jen.js/tree/main/website/docs/plugins.md","tags":[],"version":"current","sidebarPosition":13,"frontMatter":{"sidebar_position":13},"sidebar":"docs","previous":{"title":"Caching","permalink":"/docs/cache"},"next":{"title":"Build System","permalink":"/docs/build"}}');var o=i(5656),s=i(6145);const l={sidebar_position:13},r="Plugins",a={},c=[{value:"Plugin Overview",id:"plugin-overview",level:2},{value:"Creating a Plugin",id:"creating-a-plugin",level:2},{value:"Plugin Lifecycle",id:"plugin-lifecycle",level:2},{value:"onBuild Hook",id:"onbuild-hook",level:3},{value:"onServe Hook",id:"onserve-hook",level:3},{value:"onRoute Hook",id:"onroute-hook",level:3},{value:"onData Hook",id:"ondata-hook",level:3},{value:"Common Plugins",id:"common-plugins",level:2},{value:"Sitemap Generator",id:"sitemap-generator",level:3},{value:"Analytics Injector",id:"analytics-injector",level:3},{value:"Environment Variables",id:"environment-variables",level:3},{value:"RSS Feed Generator",id:"rss-feed-generator",level:3},{value:"Cache Warmer",id:"cache-warmer",level:3},{value:"Registering Plugins",id:"registering-plugins",level:2},{value:"Plugin API",id:"plugin-api",level:2},{value:"Types",id:"types",level:3},{value:"Error Handling",id:"error-handling",level:2},{value:"Plugin Ordering",id:"plugin-ordering",level:2},{value:"Best Practices",id:"best-practices",level:2},{value:"Publishing Plugins",id:"publishing-plugins",level:2},{value:"Advanced Example",id:"advanced-example",level:2},{value:"Next Steps",id:"next-steps",level:2}];function d(n){const e={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,s.R)(),...n.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(e.header,{children:(0,o.jsx)(e.h1,{id:"plugins",children:"Plugins"})}),"\n",(0,o.jsx)(e.p,{children:"Extend Jen.js functionality with a powerful plugin system."}),"\n",(0,o.jsx)(e.h2,{id:"plugin-overview",children:"Plugin Overview"}),"\n",(0,o.jsx)(e.p,{children:"Plugins hook into framework lifecycle events:"}),"\n",(0,o.jsxs)(e.ul,{children:["\n",(0,o.jsxs)(e.li,{children:[(0,o.jsx)(e.code,{children:"onBuild"})," - Before/during build"]}),"\n",(0,o.jsxs)(e.li,{children:[(0,o.jsx)(e.code,{children:"onServe"})," - Before/during serving"]}),"\n",(0,o.jsxs)(e.li,{children:[(0,o.jsx)(e.code,{children:"onDeploy"})," - Before deployment"]}),"\n",(0,o.jsxs)(e.li,{children:[(0,o.jsx)(e.code,{children:"onRoute"})," - When route is processed"]}),"\n",(0,o.jsxs)(e.li,{children:[(0,o.jsx)(e.code,{children:"onData"})," - When data is loaded"]}),"\n"]}),"\n",(0,o.jsx)(e.h2,{id:"creating-a-plugin",children:"Creating a Plugin"}),"\n",(0,o.jsxs)(e.p,{children:["Create plugin files in ",(0,o.jsx)(e.code,{children:"src/plugin/plugins/"}),":"]}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-typescript",children:"// src/plugin/plugins/example.ts\n\nimport type { Plugin } from '@src/plugin/types';\n\nexport default {\n  name: 'example-plugin',\n  version: '1.0.0',\n  \n  onBuild: async () => {\n    console.log('Building...');\n  },\n  \n  onServe: async () => {\n    console.log('Serving...');\n  },\n  \n  onDeploy: async () => {\n    console.log('Deploying...');\n  }\n} satisfies Plugin;\n"})}),"\n",(0,o.jsx)(e.h2,{id:"plugin-lifecycle",children:"Plugin Lifecycle"}),"\n",(0,o.jsx)(e.h3,{id:"onbuild-hook",children:"onBuild Hook"}),"\n",(0,o.jsxs)(e.p,{children:["Runs during ",(0,o.jsx)(e.code,{children:"npm run build"}),":"]}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-typescript",children:"const plugin = {\n  name: 'build-hook-plugin',\n  \n  onBuild: async (context: BuildContext) => {\n    console.log(`Building to ${context.outDir}`);\n    \n    // Generate sitemap\n    const sitemap = generateSitemap(context.routes);\n    await writeSitemap(sitemap, context.outDir);\n  }\n};\n"})}),"\n",(0,o.jsx)(e.h3,{id:"onserve-hook",children:"onServe Hook"}),"\n",(0,o.jsxs)(e.p,{children:["Runs during ",(0,o.jsx)(e.code,{children:"npm run dev"})," or ",(0,o.jsx)(e.code,{children:"npm run start"}),":"]}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-typescript",children:"const plugin = {\n  name: 'serve-hook-plugin',\n  \n  onServe: async (context: ServeContext) => {\n    console.log(`Serving on ${context.port}`);\n    \n    // Start background jobs\n    startScheduledTasks();\n  }\n};\n"})}),"\n",(0,o.jsx)(e.h3,{id:"onroute-hook",children:"onRoute Hook"}),"\n",(0,o.jsx)(e.p,{children:"Runs for each route during build/serve:"}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-typescript",children:"const plugin = {\n  name: 'route-hook-plugin',\n  \n  onRoute: async (context: RouteContext) => {\n    console.log(`Processing route: ${context.path}`);\n    \n    // Validate route\n    if (context.isApiRoute) {\n      validateApiRoute(context);\n    }\n  }\n};\n"})}),"\n",(0,o.jsx)(e.h3,{id:"ondata-hook",children:"onData Hook"}),"\n",(0,o.jsx)(e.p,{children:"Runs when loader data is fetched:"}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-typescript",children:"const plugin = {\n  name: 'data-hook-plugin',\n  \n  onData: async (context: DataContext) => {\n    console.log(`Loaded data for ${context.route}`);\n    \n    // Enrich data\n    context.data.metadata = {\n      loadedAt: new Date(),\n      source: 'database'\n    };\n  }\n};\n"})}),"\n",(0,o.jsx)(e.h2,{id:"common-plugins",children:"Common Plugins"}),"\n",(0,o.jsx)(e.h3,{id:"sitemap-generator",children:"Sitemap Generator"}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-typescript",children:"// src/plugin/plugins/sitemap.ts\n\nimport { writeFile } from 'node:fs/promises';\nimport { join } from 'node:path';\n\nexport default {\n  name: 'sitemap-plugin',\n  \n  onBuild: async (context: BuildContext) => {\n    const routes = context.routes.filter(r => !r.isApiRoute && !r.isPrivate);\n    \n    const xml = `<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<urlset xmlns=\"http://www.sitemaps.org/schemas/sitemap/0.9\">\n${routes.map(r => `  <url><loc>https://example.com${r.path}</loc></url>`).join('\\n')}\n</urlset>`;\n    \n    await writeFile(join(context.outDir, 'sitemap.xml'), xml);\n    console.log('Generated sitemap.xml');\n  }\n};\n"})}),"\n",(0,o.jsx)(e.h3,{id:"analytics-injector",children:"Analytics Injector"}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-typescript",children:"// src/plugin/plugins/analytics.ts\n\nexport default {\n  name: 'analytics-plugin',\n  \n  onRoute: async (context: RouteContext) => {\n    if (!context.isApiRoute && context.component) {\n      // Inject analytics tracking\n      context.component = wrapWithAnalytics(context.component);\n    }\n  }\n};\n\nfunction wrapWithAnalytics(component: any) {\n  return function WithAnalytics(props: any) {\n    useEffect(() => {\n      // Track page view\n      if (typeof window !== 'undefined' && (window as any).gtag) {\n        (window as any).gtag('event', 'page_view', {\n          page_path: window.location.pathname\n        });\n      }\n    }, []);\n    \n    return component(props);\n  };\n}\n"})}),"\n",(0,o.jsx)(e.h3,{id:"environment-variables",children:"Environment Variables"}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-typescript",children:"// src/plugin/plugins/env.ts\n\nexport default {\n  name: 'env-plugin',\n  \n  onBuild: async () => {\n    // Validate required env vars\n    const required = ['DATABASE_URL', 'API_KEY'];\n    \n    for (const key of required) {\n      if (!process.env[key]) {\n        throw new Error(`Missing env var: ${key}`);\n      }\n    }\n    \n    console.log('Environment variables validated');\n  }\n};\n"})}),"\n",(0,o.jsx)(e.h3,{id:"rss-feed-generator",children:"RSS Feed Generator"}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-typescript",children:"// src/plugin/plugins/rss.ts\n\nexport default {\n  name: 'rss-plugin',\n  \n  onBuild: async (context: BuildContext) => {\n    const posts = context.data.posts || [];\n    \n    const feed = `<?xml version=\"1.0\"?>\n<rss version=\"2.0\">\n  <channel>\n    <title>My Blog</title>\n    <link>https://example.com</link>\n    <description>My blog feed</description>\n${posts.map(p => `\n    <item>\n      <title>${p.title}</title>\n      <link>https://example.com/posts/${p.slug}</link>\n      <pubDate>${new Date(p.createdAt).toUTCString()}</pubDate>\n    </item>\n`).join('')}\n  </channel>\n</rss>`;\n    \n    await writeFile(join(context.outDir, 'feed.xml'), feed);\n  }\n};\n"})}),"\n",(0,o.jsx)(e.h3,{id:"cache-warmer",children:"Cache Warmer"}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-typescript",children:"// src/plugin/plugins/warmCache.ts\n\nexport default {\n  name: 'warm-cache-plugin',\n  \n  onServe: async (context: ServeContext) => {\n    // Pre-fetch and cache important routes\n    const criticalRoutes = [\n      '/',\n      '/about',\n      '/blog'\n    ];\n    \n    for (const route of criticalRoutes) {\n      try {\n        await fetch(`http://localhost:${context.port}${route}`);\n        console.log(`Warmed cache for ${route}`);\n      } catch (error) {\n        console.error(`Failed to warm ${route}`);\n      }\n    }\n  }\n};\n"})}),"\n",(0,o.jsx)(e.h2,{id:"registering-plugins",children:"Registering Plugins"}),"\n",(0,o.jsxs)(e.p,{children:["Add plugins to ",(0,o.jsx)(e.code,{children:"jen.config.ts"}),":"]}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-typescript",children:"import examplePlugin from '@src/plugin/plugins/example';\nimport sitemapPlugin from '@src/plugin/plugins/sitemap';\n\nconst config: FrameworkConfig = {\n  plugins: [\n    examplePlugin,\n    sitemapPlugin\n  ]\n};\n\nexport default config;\n"})}),"\n",(0,o.jsx)(e.p,{children:"Or dynamically:"}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-typescript",children:"const config: FrameworkConfig = {\n  plugins: [\n    ...(process.env.NODE_ENV === 'production' \n      ? [productionPlugin] \n      : [devPlugin])\n  ]\n};\n"})}),"\n",(0,o.jsx)(e.h2,{id:"plugin-api",children:"Plugin API"}),"\n",(0,o.jsx)(e.h3,{id:"types",children:"Types"}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-typescript",children:"interface Plugin {\n  name: string;\n  version?: string;\n  \n  onBuild?: (context: BuildContext) => Promise<void>;\n  onServe?: (context: ServeContext) => Promise<void>;\n  onDeploy?: (context: DeployContext) => Promise<void>;\n  onRoute?: (context: RouteContext) => Promise<void>;\n  onData?: (context: DataContext) => Promise<void>;\n}\n\ninterface BuildContext {\n  outDir: string;\n  sourceDir: string;\n  routes: RouteInfo[];\n  config: FrameworkConfig;\n}\n\ninterface ServeContext {\n  port: number;\n  host: string;\n  isDev: boolean;\n}\n\ninterface RouteContext {\n  path: string;\n  file: string;\n  isApiRoute: boolean;\n  isPrivate: boolean;\n  component?: any;\n}\n\ninterface DataContext {\n  route: string;\n  data: Record<string, any>;\n}\n"})}),"\n",(0,o.jsx)(e.h2,{id:"error-handling",children:"Error Handling"}),"\n",(0,o.jsx)(e.p,{children:"Handle errors gracefully in plugins:"}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-typescript",children:"export default {\n  name: 'safe-plugin',\n  \n  onBuild: async (context: BuildContext) => {\n    try {\n      // Plugin logic\n      await doSomething();\n    } catch (error) {\n      console.error('Plugin error:', error);\n      // Don't throw - let build continue\n    }\n  }\n};\n"})}),"\n",(0,o.jsx)(e.h2,{id:"plugin-ordering",children:"Plugin Ordering"}),"\n",(0,o.jsx)(e.p,{children:"Plugins run in registration order:"}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-typescript",children:"const config: FrameworkConfig = {\n  plugins: [\n    envPlugin,           // 1. Validate environment first\n    analyticsPlugin,     // 2. Setup analytics\n    sitemapPlugin,       // 3. Generate sitemap\n    warmCachePlugin      // 4. Warm cache last\n  ]\n};\n"})}),"\n",(0,o.jsx)(e.h2,{id:"best-practices",children:"Best Practices"}),"\n",(0,o.jsxs)(e.ol,{children:["\n",(0,o.jsxs)(e.li,{children:[(0,o.jsx)(e.strong,{children:"Name your plugin clearly"})," - Use descriptive names"]}),"\n",(0,o.jsxs)(e.li,{children:[(0,o.jsx)(e.strong,{children:"Handle errors"})," - Don't crash the build"]}),"\n",(0,o.jsxs)(e.li,{children:[(0,o.jsx)(e.strong,{children:"Log progress"})," - Help developers debug"]}),"\n",(0,o.jsxs)(e.li,{children:[(0,o.jsx)(e.strong,{children:"Don't mutate config"})," - Create copies if needed"]}),"\n",(0,o.jsxs)(e.li,{children:[(0,o.jsx)(e.strong,{children:"Respect context"})," - Don't modify context unnecessarily"]}),"\n",(0,o.jsxs)(e.li,{children:[(0,o.jsx)(e.strong,{children:"Document behavior"})," - Explain what the plugin does"]}),"\n",(0,o.jsxs)(e.li,{children:[(0,o.jsx)(e.strong,{children:"Make configurable"})," - Allow customization"]}),"\n",(0,o.jsxs)(e.li,{children:[(0,o.jsx)(e.strong,{children:"Test thoroughly"})," - Ensure reliability"]}),"\n"]}),"\n",(0,o.jsx)(e.h2,{id:"publishing-plugins",children:"Publishing Plugins"}),"\n",(0,o.jsx)(e.p,{children:"Create npm packages for plugins:"}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-json",children:'{\n  "name": "@jen/plugin-sitemap",\n  "version": "1.0.0",\n  "exports": "./dist/index.js"\n}\n'})}),"\n",(0,o.jsx)(e.p,{children:"Use in projects:"}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-typescript",children:"import sitemapPlugin from '@jen/plugin-sitemap';\n\nconst config = {\n  plugins: [sitemapPlugin]\n};\n"})}),"\n",(0,o.jsx)(e.h2,{id:"advanced-example",children:"Advanced Example"}),"\n",(0,o.jsx)(e.p,{children:"Full-featured plugin with options:"}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-typescript",children:"// src/plugin/plugins/advanced.ts\n\ninterface AdvancedPluginOptions {\n  enabled?: boolean;\n  verbose?: boolean;\n}\n\nexport default function createAdvancedPlugin(\n  options: AdvancedPluginOptions = {}\n) {\n  const { enabled = true, verbose = false } = options;\n  \n  return {\n    name: 'advanced-plugin',\n    \n    onBuild: async (context: BuildContext) => {\n      if (!enabled) return;\n      \n      if (verbose) {\n        console.log('Advanced plugin starting...');\n      }\n      \n      // Do advanced things\n      const result = await processRoutes(context.routes);\n      \n      if (verbose) {\n        console.log(`Processed ${result.count} routes`);\n      }\n    }\n  };\n}\n\n// Usage\nconst config: FrameworkConfig = {\n  plugins: [\n    createAdvancedPlugin({\n      enabled: process.env.NODE_ENV === 'production',\n      verbose: true\n    })\n  ]\n};\n"})}),"\n",(0,o.jsx)(e.h2,{id:"next-steps",children:"Next Steps"}),"\n",(0,o.jsxs)(e.ul,{children:["\n",(0,o.jsxs)(e.li,{children:[(0,o.jsx)(e.a,{href:"./build",children:"Build"})," - Build optimization"]}),"\n",(0,o.jsxs)(e.li,{children:[(0,o.jsx)(e.a,{href:"./deployment",children:"Deployment"})," - Deploy your site"]}),"\n"]})]})}function u(n={}){const{wrapper:e}={...(0,s.R)(),...n.components};return e?(0,o.jsx)(e,{...n,children:(0,o.jsx)(d,{...n})}):d(n)}}}]);